#!/usr/bin/env dot
digraph concurrent_withdrawal {
        graph[rankdir=LR]
        {
                peter[label="Peter"]
                access_peter[label="$100"]
                new_peter[label="+$10"]
                set_peter[label="$110"]
        }
        {
                paul[label="Paul"]
                access_paul[label="$100"]
                new_paul[label="-$20"]
                set_paul[label="$80"]
        }
        {
                mary[label="Mary"]
                access_mary[label="$100"]
                new_mary[label="/ 2"]
                set_mary[label="$50"]
        }
        { node[shape=plaintext] 1 2 3 4 5 6 }
        { rank=same 1 peter paul mary }
        { rank=same 2 access_peter access_paul access_mary }
        { rank=same 4 new_paul }
        { rank=same 5 new_peter }
        1 -> 2 -> 3 -> 4 -> 5 -> 6 [style=invis]
        peter -> access_peter [label=access]
        access_peter -> new_peter [label=evaluate]
        new_peter -> set_peter [label=set]
        paul -> access_paul [label=access]
        access_paul -> new_paul [label=evaluate]
        new_paul -> set_paul [label=set]
        mary -> access_mary [label=access]
        access_mary -> new_mary [label=evaluate]
        new_mary -> set_mary [label=set]
}
