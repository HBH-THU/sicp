#!/usr/bin/env dot
digraph permutation_violation {
        { node[shape=plaintext] 1 2 3 4 5 6 7 }
        {
                peter[label=Peter]
                peter_ra1[label="a1: $30"]
                peter_ra2[label="a2: $20"]
                peter_da1a2[label="&Delta;a1a2: $10"]
                peter_rwa1[label="a1: $0"]
                peter_rda2[label="a2: $30"]
        }
        {
                paul[label=Paul]
                paul_ra1[label="a1: $30"]
                paul_ra3[label="a3: $10"]
                paul_da1a3[label="&Delta;a1a3: $20"]
                paul_rwa1[label="a1: $10"]
                paul_rda3[label="a3: $30"]
        }
        { rank=same 1 peter paul }
        { rank=same 2 peter_ra1 paul_ra1 }
        { rank=same 3 peter_ra2 paul_ra3 }
        { rank=same 4 peter_da1a2 paul_da1a3 }
        { rank=same 5 paul_rwa1 }
        { rank=same 6 peter_rwa1 paul_rda3 }
        1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 7 [style=invis]
        peter -> peter_ra1 [label="read"]
        peter_ra1 -> peter_ra2 [label="read"]
        peter_ra2 -> peter_da1a2 [label="subtract"]
        peter_da1a2 -> peter_rwa1 [label="read/withdraw"]
        peter_rwa1 -> peter_rda2 [label="read/deposit"]
        paul -> paul_ra1 [label="read"]
        paul_ra1 -> paul_ra3 [label="read"]
        paul_ra3 -> paul_da1a3 [label="subtract"]
        paul_da1a3 -> paul_rwa1 [label="read/withdraw"]
        paul_rwa1 -> paul_rda3 [label="read/deposit"]
}
