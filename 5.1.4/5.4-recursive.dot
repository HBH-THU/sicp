#!/usr/bin/env dot
digraph recursive_expt {
        edge[fontname=monospace]
        node[fontname=monospace]
        {
                node[shape=box]
                b
                n
                val
                continue
                stack
        }
        {
                node[shape=trapezium]
                equal[label="="]
                times[label="*"]
                minus[label="-"]
        }
        {
                node[shape=triangle]
                zero[label=0]
                one[label=1]
                after_expt[label="after-\nexpt"]
                expt_done[label="expt-\ndone"]
        }
        {
                node[shape=plaintext]
                controller
        }
        n -> equal
        zero -> equal
        after_expt -> continue[label="continue &larr; after-expt"]
        expt_done -> continue[label="continue &larr; expt-done"]
        continue -> controller
        continue -> stack[label="save continue"]
        stack -> continue[label="restore continue"]
        n -> stack[label="save n"]
        stack -> n[label="restore n"]
        n -> minus
        one -> minus
        minus -> n[label="n &larr; -"]
        b -> times
        val -> times
        times -> val[label="val &larr; *"]
        one -> val[label="val &larr; 1"]
}
